{
  "name": "legal_doc_analysis_pipeline",
  "email_notifications": {
    "on_failure": [],
    "on_success": []
  },
  "timeout_seconds": 0,
  "schedule": {
    "quartz_cron_expression": "0 0 2 * * ?",
    "timezone_id": "America/New_York",
    "pause_status": "UNPAUSED"
  },
  "max_concurrent_runs": 1,
  "format": "MULTI_TASK",
  "tasks": [
    {
      "task_key": "01_ingestion",
      "notebook_task": {
        "notebook_path": "/Workspace/Repos/genai-legal-doc-poc/notebooks/01_ingest_sec_data",
        "source": "WORKSPACE"
      },
      "job_cluster_key": "default_cluster",
      "timeout_seconds": 3600
    },
    {
      "task_key": "02_processing",
      "depends_on": [
        {
          "task_key": "01_ingestion"
        }
      ],
      "notebook_task": {
        "notebook_path": "/Workspace/Repos/genai-legal-doc-poc/notebooks/02_preprocess_text_ocr",
        "source": "WORKSPACE"
      },
      "job_cluster_key": "default_cluster",
      "timeout_seconds": 7200
    },
    {
      "task_key": "03_embeddings",
      "depends_on": [
        {
          "task_key": "02_processing"
        }
      ],
      "notebook_task": {
        "notebook_path": "/Workspace/Repos/genai-legal-doc-poc/notebooks/03_embeddings_faiss_index",
        "source": "WORKSPACE"
      },
      "job_cluster_key": "default_cluster",
      "timeout_seconds": 3600
    },
    {
      "task_key": "04_rag_extraction",
      "depends_on": [
        {
          "task_key": "03_embeddings"
        }
      ],
      "notebook_task": {
        "notebook_path": "/Workspace/Repos/genai-legal-doc-poc/notebooks/04_rag_pipeline_llm",
        "source": "WORKSPACE"
      },
      "job_cluster_key": "default_cluster",
      "timeout_seconds": 7200
    },
    {
      "task_key": "05_reporting",
      "depends_on": [
        {
          "task_key": "04_rag_extraction"
        }
      ],
      "notebook_task": {
        "notebook_path": "/Workspace/Repos/genai-legal-doc-poc/notebooks/05_reporting_streamlit",
        "source": "WORKSPACE"
      },
      "job_cluster_key": "default_cluster",
      "timeout_seconds": 1800
    }
  ],
  "job_clusters": [
    {
      "job_cluster_key": "default_cluster",
      "new_cluster": {
        "spark_version": "13.3.x-scala2.12",
        "node_type_id": "i3.xlarge",
        "num_workers": 2,
        "spark_conf": {
          "spark.databricks.delta.optimizeWrite.enabled": "true",
          "spark.databricks.delta.autoCompact.enabled": "true"
        }
      }
    }
  ]
}

